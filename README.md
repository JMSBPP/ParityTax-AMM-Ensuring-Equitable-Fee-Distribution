# ParityTax-AMM-Ensuring-Equitable-Fee-Distribution

<div align="center">

  <img src="https://img.shields.io/badge/Solidity-363636?style=for-the-badge&logo=solidity&logoColor=white" alt="Solidity"/>
  <img src="https://img.shields.io/badge/Ethereum-3C3C3D?style=for-the-badge&logo=ethereum&logoColor=white" alt="Ethereum"/>
  <img src="https://img.shields.io/badge/Uniswap-FF007A?style=for-the-badge&logo=uniswap&logoColor=white" alt="Uniswap"/>

</div>

<p align="center">
  <img src="assets/logo.png" alt="Description" width="300"/>
</p>

> Explore the full protocol design, mechanism details, and usage instructions in the [ParityTax-AMM Documentation](https://parity-tax-amm.gitbook.io/parity-tax-amm-docs)


## Table of Contents
- [ParityTax-AMM-Ensuring-Equitable-Fee-Distribution](#paritytax-amm-ensuring-equitable-fee-distribution)
  - [Table of Contents](#table-of-contents)
  - [Demo](#demo)
  - [Pitch Dec](#pitch-dec)
  - [Overview](#overview)
    - [Problem Description](#problem-description)
    - [Solution Overview](#solution-overview)
  - [Core-Functionality](#core-functionality)
  - [Arquitecture](#arquitecture)
  - [Key-Metrics](#key-metrics)
  - [Setup](#setup)
    - [Build](#build)
    - [Test](#test)
    - [Deploy](#deploy)
  - [Applications](#applications)
  - [Extensions \& Future Roadmap](#extensions--future-roadmap)
  - [Mathematical Appendix](#mathematical-appendix)

## Demo
## Pitch Dec

## Overview

###  Problem Description
The current market structure creates inefficiencies in trading execution due to imbalances between passive (PLP) and just-in-time (JIT) liquidity provision, leading to:

- **Reduced Trading Incentives** 

  - Traders hesitate to execute swaps when passive liquidity is insufficient or when JIT liquidity provision is uncertain. This results in lower trading volume, which reduces fees generated by LPs, ultimately diminishing overall system welfare.(_**include references and hypothesis testing**_)

- **Excessive Price Impact for Large Orders**

  - When JIT liquidity is scarce, large trades suffer significant slippage, as JIT liquidity providers (who react post-trade rather than preemptively) may strategically withhold liquidity to exploit price movements.(_**include references and hypothesis testing**_)

- **Vulnerability to Predatory Behavior**

  - In the absence of robust PLP, traders become exposed to opportunistic strategies by JIT, mirroring how high-frequency trading (HFT) firms traditionally front-run large orders in traditional markets (_**include references and hypothesis testing**_)



### Solution Overview
A more balanced liquidity ecosystem where:

- PLP acts as a dependable baseline, reducing volatility and slippage.

- JIT liquidity complements (rather than dominates) market-making, preventing exploitative practices.

- Traders can execute large orders with confidence in fair pricing and minimal adverse selection.

## Core-Functionality

## Arquitecture

## Key-Metrics

## Deployed Contracts

### Sepolia Testnet (Chain ID: 11155111)

| Contract | Address | Description |
|----------|---------|-------------|
| **ParityTaxHook** | `0x468947142AEf4F380b5E0794B5c2296faa6d6Fd3` | Core hook contract for equitable fee distribution |
| **ParityTaxExtt** | `0x1118879ccce8a1237c91a5256ad1796ad9085b91` | Extension contract for additional functionality |
| **UniformFiscalPolicy** | `0x9152dF1c95787C830A8b794f087757D22Ac1950F` | Fiscal policy implementation |
| **ParityTaxRouter** | `0xD47A70d43C79b150Fed628520cae1fBf3849a19D` | Router for swap operations |
| **MockJITResolver** | `0x9CfbE05028cD3E1e1aD05f4B43c8FE6842eFE6Ef` | JIT liquidity resolver |
| **MockPLPResolver** | `0x918633d1Ee594Ba0a51787f40fA99674E946dE4e` | PLP liquidity resolver |

**Deployer**: `0xbd8a7d2a59c7452b411f01797fd82f8270aefFF3`

### Reactive Testnet (Chain ID: 5318007)

| Contract | Address | Description |
|----------|---------|-------------|
| **SubscriptionBatchCall** | `0x2ce57C52bA83f84d607A972bf8A699902A2e94Fc` | Library for batch execution of ParityTax hook subscriptions |
| **FiscalListeningPost** | `0x3E68044b4291F5a22Ac31D9Ad6793B535BD1d3C3` | Reactive network bridge for forwarding event data |

**Deployer**: `0xBD8A7d2a59C7452b411f01797fd82f8270aefFF3`  
**Verification**: SubscriptionBatchCall verified on Sourcify

## Setup
```sh

git clone -b atrium-cohort6-deliverable https://github.com/JMSBPP/ParityTax-AMM-Ensuring-Equitable-Fee-Distribution.git
cd ParityTax-AMM-Ensuring-Equitable-Fee-Distribution
```

### Build
```sh
make build
# or
forge build
```

### Test
```sh
make test
# or
forge test

# Run specific tests
make test-hook
make test-gas
```

### Deploy
```sh
# Deploy liquidity resolvers to Sepolia
make deploy-liquidity-resolvers

# Deploy fiscal policy to Sepolia
make deploy-fiscal-policy

# Deploy all contracts
make deploy-all
```

### Available Make Commands
| Command | Description |
|---------|-------------|
| `make help` | Show all available commands |
| `make build` | Build the project |
| `make test` | Run all tests |
| `make test-hook` | Run ParityTax-specific tests |
| `make test-gas` | Run tests with gas reporting |
| `make deploy-liquidity-resolvers` | Deploy liquidity resolvers to Sepolia |
| `make deploy-fiscal-policy` | Deploy fiscal policy to Sepolia |
| `make deploy-all` | Deploy all contracts to Sepolia |
| `make clean` | Clean build artifacts |
| `make format` | Format Solidity code |
| `make sizes` | Show contract sizes |




## Applications

## Extensions & Future Roadmap

## Mathematical Appendix